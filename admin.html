<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Polyplay Music App Beta v0 — Admin Upload</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="app admin">
      <header class="topbar">
        <div class="brand">Admin • Upload</div>
        <a class="back-link" href="index.html" aria-label="Back to player">
          <span class="back-icon" aria-hidden="true">↩︎</span>
        </a>
        <div class="hint">Upload audio, title, and artwork</div>
      </header>

      <main class="admin-card">
        <div class="splash-media">
          <video class="splash-video" src="polyplaylogoanimate.mp4" playsinline autoplay muted loop preload="metadata"></video>
        </div>
        <form class="admin-form">
          <label class="field">
            <span>Track title</span>
            <input type="text" name="title" />
          </label>

          <label class="field drop-zone" data-drop="audio">
            <span>Audio file (.wav or .mp3)</span>
            <input type="file" name="audio" accept="audio/wav,audio/x-wav,audio/mpeg" />
            <small class="drop-hint">Drag & drop audio here</small>
          </label>

          <label class="field drop-zone" data-drop="art">
            <span>Artwork image</span>
            <input type="file" name="art" accept="image/*" />
            <small class="drop-hint">Drag & drop artwork here</small>
          </label>
          <div class="artwork-crop upload-artwork-crop" hidden>
            <div class="artwork-label">Upload artwork crop (square)</div>
            <canvas class="artwork-canvas upload-artwork-canvas" width="220" height="220"></canvas>
            <div class="crop-controls">
              <label class="field">
                <span>Zoom</span>
                <input type="range" name="uploadZoom" min="1" max="2.5" step="0.01" value="1" />
              </label>
              <label class="field">
                <span>Pan X</span>
                <input type="range" name="uploadPanX" min="-0.5" max="0.5" step="0.01" value="0" />
              </label>
              <label class="field">
                <span>Pan Y</span>
                <input type="range" name="uploadPanY" min="-0.5" max="0.5" step="0.01" value="0" />
              </label>
            </div>
          </div>

          <div class="admin-actions">
            <button type="submit" class="ctrl admin-primary">Upload</button>
            <button type="reset" class="ghost">Clear</button>
          </div>
          <div class="admin-status" aria-live="polite"></div>
        </form>
        <details class="advanced-settings">
          <summary>Advanced options</summary>
          <div class="admin-divider"></div>
          <form class="admin-form artwork-form">
          <label class="field">
            <span>Update artwork for existing track</span>
            <select name="track" class="track-select"></select>
          </label>
          <div class="artwork-preview">
            <div class="artwork-label">Current artwork</div>
            <div class="artwork-thumb" aria-live="polite"></div>
          </div>
          <div class="artwork-crop">
            <div class="artwork-label">Crop preview (square)</div>
            <canvas class="artwork-canvas" width="220" height="220"></canvas>
            <div class="crop-controls">
              <label class="field">
                <span>Zoom</span>
                <input type="range" name="zoom" min="1" max="2.5" step="0.01" value="1" />
              </label>
              <label class="field">
                <span>Pan X</span>
                <input type="range" name="panX" min="-0.5" max="0.5" step="0.01" value="0" />
              </label>
              <label class="field">
                <span>Pan Y</span>
                <input type="range" name="panY" min="-0.5" max="0.5" step="0.01" value="0" />
              </label>
            </div>
          </div>
          <label class="field drop-zone" data-drop="artwork">
            <span>New artwork image</span>
            <input type="file" name="artwork" accept="image/*" />
            <small class="drop-hint">Drag & drop new artwork here</small>
          </label>
          <div class="admin-actions">
            <button type="button" class="ctrl admin-primary update-artwork">Update Artwork</button>
          </div>
          <div class="admin-status artwork-status" aria-live="polite"></div>
        </form>
        
        <div class="admin-divider"></div>
        <form class="admin-form replace-audio-form">
          <label class="field">
            <span>Replace audio for existing track</span>
            <select name="track" class="replace-audio-select"></select>
          </label>
          <label class="field drop-zone" data-drop="audio-replace">
            <span>New audio file (.wav or .mp3)</span>
            <input type="file" name="audio" accept="audio/wav,audio/x-wav,audio/mpeg" />
            <small class="drop-hint">Drag & drop new audio here</small>
          </label>
          <div class="admin-actions">
            <button type="button" class="ctrl admin-primary replace-audio">Replace Audio</button>
          </div>
          <div class="admin-status replace-audio-status" aria-live="polite"></div>
        </form>
        <div class="admin-divider"></div>
        <form class="admin-form remove-form">
          <label class="field">
            <span>Remove track</span>
            <select name="track" class="remove-track-select"></select>
          </label>
          <div class="admin-actions">
            <button type="button" class="ghost danger remove-track">Remove Track</button>
          </div>
          <div class="admin-status remove-status" aria-live="polite"></div>
        </form>
        <div class="admin-divider"></div>
        
        <button type="button" class="ghost danger nuke-polyplaylist" aria-label="Nuke polyplaylist">☢︎ Nuke Playlist</button>
        <div class="nuke-modal" hidden aria-hidden="true">
          <div class="nuke-dialog" role="dialog" aria-modal="true">
            <div class="nuke-title">Nuke your polyplaylist?</div>
            <div class="nuke-sub">This will delete all tracks from this device.</div>
            <div class="nuke-actions">
              <button type="button" class="ghost" data-nuke-cancel">Cancel</button>
              <button type="button" class="ghost danger" data-nuke-confirm">Confirm</button>
            </div>
            <div class="nuke-countdown" hidden>
              <div class="nuke-number">4</div>
              <button type="button" class="ghost danger nuke-abort">Abort</button>
            </div>
          </div>
        </div>
        <button type="button" class="ghost reset-aura danger">Reset Aura</button>
        </details>
      </main>
    </div>
    <script src="admin.js"></script>
  </body>
</html>
